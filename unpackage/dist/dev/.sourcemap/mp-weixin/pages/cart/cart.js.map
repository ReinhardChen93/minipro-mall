{"version":3,"sources":["webpack:////Users/reinhardchen/Documents/HBuilderProjects/仿小米商城/main.js","webpack:////Users/reinhardchen/Documents/HBuilderProjects/仿小米商城/pages/cart/cart.vue?cba3","webpack:////Users/reinhardchen/Documents/HBuilderProjects/仿小米商城/pages/cart/cart.vue?7560","webpack:////Users/reinhardchen/Documents/HBuilderProjects/仿小米商城/pages/cart/cart.vue?b9bb","webpack:////Users/reinhardchen/Documents/HBuilderProjects/仿小米商城/pages/cart/cart.vue?ea5e","webpack:////Users/reinhardchen/Documents/HBuilderProjects/仿小米商城/pages/cart/cart.vue"],"names":["createPage","Page","mixins","loading","components","uniNavBar","price","uniNumberBox","commonList","skuPopup","data","isedit","hotList","filters","toFixedTotalPrice","value","toFixed","computed","list","state","cart","selectedList","onLoad","getData","beforeDestroy","uni","$off","onPullDownRefresh","methods","changeNum","e","item","index","num","showLoading","title","$H","post","id","token","then","res","console","log","hideLoading","orderConfirm","length","showToast","icon","navigateTo","url","JSON","stringify","showPopup","get","check","skusText","split","selects","goods_skus_card","map","v","i","selected","goods_skus_card_value","v1","i1","name","goods_skus","forEach","arr","key","skus","push","join","doShowPopup","updateCartList","stopPullDownRefresh","catch","err","cover","desc","oprice","min_oprice","pprice","min_price"],"mappings":"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","file":"pages/cart/cart.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\n\nimport Vue from 'vue'            \nimport Page from './pages/cart/cart.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./cart.vue?vue&type=template&id=747c332e&\"\nvar renderjs\nimport script from \"./cart.vue?vue&type=script&lang=js&\"\nexport * from \"./cart.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('747c332e')) {\n      api.createRecord('747c332e', component.options)\n    } else {\n      api.reload('747c332e', component.options)\n    }\n    module.hot.accept(\"./cart.vue?vue&type=template&id=747c332e&\", function () {\n      api.rerender('747c332e', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"Users/reinhardchen/Documents/HBuilderProjects/仿小米商城/pages/cart/cart.vue\"\nexport default component.exports","export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./cart.vue?vue&type=template&id=747c332e&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var f0 = _vm._f(\"toFixedTotalPrice\")(_vm.totalPrice)\n\n  if (!_vm._isMounted) {\n    _vm.e0 = function($event) {\n      _vm.isedit = !_vm.isedit\n    }\n  }\n\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        f0: f0\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./cart.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./cart.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport loading from \"@/common/mixin/loading.js\"\nimport uniNavBar from \"@/components/uni-ui/uni-nav-bar/uni-nav-bar.vue\"\nimport price from \"@/components/common/price.vue\"\nimport commonList from \"@/components/common/common-list.vue\"\nimport uniNumberBox from \"@/components/uni-ui/uni-number-box/uni-number-box.vue\"\nimport skuPopup from \"@/components/cart/sku-popup.vue\"\nimport {mapState,mapGetters,mapActions,mapMutations} from \"vuex\"\n\nexport default {\n\tmixins:[loading],\n\tcomponents: {\n\t\tuniNavBar,\n\t\tprice,\n\t\tuniNumberBox,\n\t\tcommonList,\n\t\tskuPopup\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tisedit: false,\n\t\t\thotList:[]\n\t\t}\n\t},\n\tfilters:{\n\t\ttoFixedTotalPrice(value){\n\t\t\treturn value.toFixed(2)\n\t\t}\n\t},\n\tcomputed: {\n\t\t...mapState({\n\t\t\tlist:state=>state.cart.list,\n\t\t\tselectedList:state=>state.cart.selectedList\n\t\t}),\n\t\t...mapGetters([\n\t\t\t'checkedAll',\n\t\t\t'totalPrice',\n\t\t\t'disableSelectAll'\n\t\t])\n\t},\n\tonLoad() {\n\t\tthis.getData()\n\t},\n\tbeforeDestroy() {\n\t\tuni.$off('updateCart')\n\t},\n\tonPullDownRefresh() {\n\t\tthis.getData()\n\t},\n\tmethods:{\n\t\t...mapActions([\n\t\t\t'doSelectAll',\n\t\t\t'doDelGoods',\n\t\t\t'doShowPopup',\n\t\t\t'updateCartList'\n\t\t]),\n\t\t...mapMutations([\n\t\t\t'selectItem',\n\t\t\t'initCartList',\n\t\t\t'unSelectAll'\n\t\t]),\n\t\tchangeNum(e,item,index){\n\t\t\tif (item.num === e) return;\n\t\t\tuni.showLoading({\n\t\t\t\ttitle:\"加载中...\"\n\t\t\t})\n\t\t\tthis.$H.post('/cart/updatenumber/'+item.id,{\n\t\t\t\tnum:e\n\t\t\t},{\n\t\t\t\ttoken:true\n\t\t\t}).then(res=>{\n\t\t\t\tconsole.log(res);\n\t\t\t\titem.num = e\n\t\t\t\tuni.hideLoading()\n\t\t\t})\n\t\t},\n\t\t// 订单结算\n\t\torderConfirm(){\n\t\t\tif(this.selectedList.length === 0){\n\t\t\t\treturn uni.showToast({\n\t\t\t\t\ttitle: '请选择要结算的商品',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t});\n\t\t\t}\n\t\t\tuni.navigateTo({\n\t\t\t\turl: '../order-confirm/order-confirm?detail='+JSON.stringify(this.selectedList)\n\t\t\t});\n\t\t},\n\t\tshowPopup(index,item){\n\t\t\tif(!this.isedit){\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.$H.get('/cart/'+item.id+'/sku',{},{\n\t\t\t\ttoken:true\n\t\t\t}).then(res=>{\n\t\t\t\t\n\t\t\t\t// 商品规格（选项部分）\n\t\t\t\tlet check = item.skusText.split(',')\n\t\t\t\tres.selects = res.goods_skus_card.map((v,i)=>{\n\t\t\t\t  let selected = 0\n\t\t\t\t  let list = v.goods_skus_card_value.map((v1,i1)=>{\n\t\t\t\t\t  if(check[i] === v1.value){\n\t\t\t\t\t\t  selected = i1\n\t\t\t\t\t  }\n\t\t\t\t\t  return {\n\t\t\t\t\t\t  id:v1.id,\n\t\t\t\t\t\t  name:v1.value\n\t\t\t\t\t  }\n\t\t\t\t  })\n\t\t\t\t  return {\n\t\t\t\t\tid:v.id,\n\t\t\t\t\ttitle:v.name,\n\t\t\t\t\tselected,\n\t\t\t\t\tlist:list\n\t\t\t\t  }\n\t\t\t\t})\n\t\t\t\t// 商品规格（匹配价格）\n\t\t\t\tres.goods_skus.forEach(item=>{\n\t\t\t\t  let arr = []\n\t\t\t\t  for (let key in item.skus) {\n\t\t\t\t\tarr.push(item.skus[key].value)\n\t\t\t\t  }\n\t\t\t\t  item.skusText = arr.join(',')\n\t\t\t\t})\n\t\t\t\t\n\t\t\t\tthis.doShowPopup({\n\t\t\t\t\tindex:index,\n\t\t\t\t\tdata:res\n\t\t\t\t})\n\t\t\t})\n\t\t},\n\t\t// 获取数据\n\t\tgetData(){\n\t\t\t// 获取购物车数据\n\t\t\tthis.updateCartList().then(res=>{\n\t\t\t\tuni.stopPullDownRefresh()\n\t\t\t}).catch(err=>{\n\t\t\t\tuni.stopPullDownRefresh()\n\t\t\t})\n\t\t\t// 获取热门推荐\n\t\t\tthis.$H.get('/goods/hotlist').then(res=>{\n\t\t\t\tthis.hotList = res.map(v=>{\n\t\t\t\t\treturn {\n\t\t\t\t\t  id:v.id,\n\t\t\t\t\t  cover:v.cover,\n\t\t\t\t\t  title:v.title,\n\t\t\t\t\t  desc:v.desc,\n\t\t\t\t\t  oprice:v.min_oprice,\n\t\t\t\t\t  pprice:v.min_price\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t})\n\t\t}\n\t}\n}\n"],"sourceRoot":""}